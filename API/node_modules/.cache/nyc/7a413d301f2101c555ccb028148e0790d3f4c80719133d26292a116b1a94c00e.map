{"version":3,"sources":["order.controller.js"],"names":["response","ResponseGenerator","OrderController","fetchAllOrders","req","res","allOrders","OrderService","setSuccess","send","orderAMeal","body","mealId","type","status","message","Number","isNaN","json","orderedMeal","order","updateAnOrder","id","params","updateOrder","data"],"mappings":"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","sourceRoot":"/Users/codepreneur/WebstormProjects/BetaChop/API/v1/controllers","sourcesContent":["import OrderService from '../services/order.service';\nimport ResponseGenerator from '../utils/ResponseGenerator';\n\nconst response = new ResponseGenerator();\n/**\n * order controller performs controls  request and response -\n * order a meal,\n * modify a meal,\n * get all orders,\n */\nconst OrderController = {\n  /**\n   * @description retrieve and return all orders from our data\n   * @param {object} req\n   * @param {object} res\n   * @returns {Array} order object array\n   */\n  fetchAllOrders(req, res) {\n    const allOrders = OrderService.fetchAllOrders();\n    response.setSuccess(200, null, allOrders);\n    return response.send(res);\n  },\n\n  /**\n   * @description order a meal\n   * @param {object} req\n   * @param {object} res\n   * @returns {object} apiResponse\n   */\n  orderAMeal(req, res) {\n    if (!req.body.mealId || !req.body.type) {\n      return res.status(400).send({\n        status: 'error',\n        message: 'All parameters are required',\n      });\n    }\n\n    const { mealId, type } = req.body;\n\n    if (Number.isNaN(Number(mealId))) {\n      return res.status(400).json({\n        status: 'error',\n        message: 'Invalid mealId. mealId must be a number',\n      });\n    }\n\n    const orderedMeal = OrderService.orderAMeal(mealId, type);\n\n    if (orderedMeal == null) {\n      return res.status(200).json({\n        status: 'error',\n        message: 'This meal cannot be found',\n      });\n    }\n\n    return res.status(200).json({\n      status: 'success',\n      message: 'Your order has been placed',\n      order: orderedMeal,\n    });\n  },\n\n  /**\n   * @description update an order record\n   * @param {object} req\n   * @param {object} res\n   * @returns {object} apiResponse\n   */\n  updateAnOrder(req, res) {\n    const { mealId, type } = req.body;\n    const { id } = req.params;\n\n    if (Number.isNaN(Number(id)) || Number.isNaN(Number(mealId))) {\n      return res.status(400).json({\n        status: 'error',\n        message: \"Invalid ID. ID's must be a number\",\n      });\n    }\n\n    const updateOrder = OrderService.updateAnOrder(id, mealId, type);\n\n    if (updateOrder == null) {\n      return res.status(400).json({\n        status: 'error',\n        message: `Order with id ${id} or Meal with id ${mealId} cannot be found`,\n      });\n    }\n    return res\n      .json({\n        status: 'success',\n        message: 'Order was successfully updated',\n        data: updateOrder,\n      })\n      .status(201);\n  },\n};\n\nexport default OrderController;\n"]}