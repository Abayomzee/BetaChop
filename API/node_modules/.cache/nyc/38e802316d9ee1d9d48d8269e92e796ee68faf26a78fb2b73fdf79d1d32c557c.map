{"version":3,"sources":["order.controller.js"],"names":["OrderController","fetchAllOrders","req","res","allOrders","OrderService","json","status","data","orderAMeal","body","mealId","type","send","message","Number","isNaN","orderedMeal","order","updateAnOrder","id","params","updateOrder"],"mappings":"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","sourceRoot":"/Users/codepreneur/WebstormProjects/BetaChop/API/v1/controllers","sourcesContent":["import OrderService from '../services/order.service';\n/**\n * order controller performs controls  request and response -\n * order a meal,\n * modify a meal,\n * get all orders,\n */\nconst OrderController = {\n  /**\n   * @description retrieve and return all orders from our data\n   * @param {object} req\n   * @param {object} res\n   * @returns {Array} order object array\n   */\n  fetchAllOrders(req, res) {\n    const allOrders = OrderService.fetchAllOrders();\n    return res\n      .json({\n        status: 'success',\n        data: allOrders,\n      })\n      .status(200);\n  },\n\n  /**\n   * @description order a meal\n   * @param {object} req\n   * @param {object} res\n   * @returns {object} apiResponse\n   */\n  orderAMeal(req, res) {\n    if (!req.body.mealId || !req.body.type) {\n      return res.status(400).send({\n        status: 'error',\n        message: 'All parameters are required',\n      });\n    }\n\n    const { mealId, type } = req.body;\n\n    if (Number.isNaN(Number(mealId))) {\n      return res.status(400).json({\n        status: 'error',\n        message: 'Invalid mealId. mealId must be a number',\n      });\n    }\n\n    const orderedMeal = OrderService.orderAMeal(mealId, type);\n\n    if (orderedMeal == null) {\n      return res.status(200).json({\n        status: 'error',\n        message: 'This meal cannot be found',\n      });\n    }\n\n    return res.status(200).json({\n      status: 'success',\n      message: 'Your order has been placed',\n      order: orderedMeal,\n    });\n  },\n\n  /**\n   * @description update an order record\n   * @param {object} req\n   * @param {object} res\n   * @returns {object} apiResponse\n   */\n  updateAnOrder(req, res) {\n    const { mealId, type } = req.body;\n    const { id } = req.params;\n\n    if (Number.isNaN(Number(id)) || Number.isNaN(Number(mealId))) {\n      return res.status(400).json({\n        status: 'error',\n        message: \"Invalid ID. ID's must be a number\",\n      });\n    }\n\n    const updateOrder = OrderService.updateAnOrder(id, mealId, type);\n\n    if (updateOrder == null) {\n      return res.status(400).json({\n        status: 'error',\n        message: `Order with id ${id} or Meal with id ${mealId} cannot be found`,\n      });\n    }\n    return res\n      .json({\n        status: 'success',\n        message: 'Order was successfully updated',\n        data: updateOrder,\n      })\n      .status(201);\n  },\n};\n\nexport default OrderController;\n"]}